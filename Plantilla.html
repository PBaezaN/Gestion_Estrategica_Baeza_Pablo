<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Pablo Baeza N">

<title>Gestion Financiera Hito 1</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="Plantilla_files/libs/clipboard/clipboard.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/quarto.js"></script>
<script src="Plantilla_files/libs/quarto-html/popper.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Plantilla_files/libs/quarto-html/anchor.min.js"></script>
<link href="Plantilla_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Plantilla_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Plantilla_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Plantilla_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Plantilla_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Gestion Financiera Hito 1</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Pablo Baeza N </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="definición" class="level3">
<h3 class="anchored" data-anchor-id="definición">Definición</h3>
<p>La industria energética a nivel mundial es una de las más grandes del mundo, ya que, para todas las actividades de hoy es necesaria, desde cargar el celular hasta ir al trabajo en auto, inclusive para alimentarnos necesitamos energía para calentar o preparar las comidas.</p>
<p>Existen muchos tipos de energías tales como eléctrica, eólica, térmica, gas natural, fósil, etc. Esta última ha tenido diversos avances a lo largo de los años desde que se descubrió a fines del siglo XX. Actualmente esta energía mueve buques, aviones, autos, entre otros lo que la hace una de las energías más ocupadas en la actualidad, sin embargo, estos últimos años se ha puesto en duda sus grandes beneficios que nos otorga debido a la gran cantidad de contaminantes que emite al medio ambiente, el cual es el principal causante del calentamiento global</p>
<p>Como se puede ver en este reciente paper “<em>Hierarchical optimal scheduling method for regional integrated energy systems considering electricity-hydrogen shared energy</em>” publicado el 2022, el cual habla de la posibilidad de disminuir el consumo de energía por medio de almacenamiento de hidrogeno lo que a su vez también beneficia al medio ambiente, las personas están buscando nuevas fuentes de energía poniendo como punto importante que sea amigable con el medio ambiente y rentable. (Link: <a href="https://www.webofscience.com/wos/woscc/full-record/WOS:001046995700001" class="uri">https://www.webofscience.com/wos/woscc/full-record/WOS:001046995700001</a>)</p>
<p>Es por esto que las empresas de todos los sectores están reconociendo este nuevo enfoque de la sociedad lo que los hace tomar medidas tales como procesos de reducción de emisiones de carbono. Para el caso de las empresas que proveen energías a las personas dicho cambio social es mucho mas importante aún</p>
<p>El activo Empresas Copec S.A. tiene un valor promedio para el intervalo igual a 6140</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Plantilla_files/figure-html/Copecline-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<pre><code></code></pre>
</section>
<section id="motivación" class="level3">
<h3 class="anchored" data-anchor-id="motivación">Motivación</h3>
<p>Para el presente trabajo se escogió la industria de energías debido a los puntos expuestos anteriormente. Esta industria está en constante cambio debido a los avances tecnológicos y sociales que hay en el mundo. Claro ejemplo de cambios es Empresas Copec S.A. la cual ha ido transformándose a lo largo de los años a ser una empresa mas amigable con el medio ambiente junto con ser la primera en servicios.</p>
<p>Empresas Copec S.A. fue fundada en 1934 con el objetivo de abastecer a los chilenos de combustible, el cual era escasos en esos años. Luego de alrededor de 90 años, Empresas Copec esta en diversas industrias a nivel nacional donde destaca en el sector energético. Esta empresa es dueño de otras empresas como Copec, Abastible, Terpel, &nbsp;entre otras, las cuales también están en la industria energética. Se puede destacar que esta empresa a través de sus filiales esta presente en más de 80 países lo que la hace ser una empresa consolidada a nivel internacional.</p>
<p>Copec es una de las tres empresas más innovadoras de Latinoamérica, lo que no es menor, ya que debe competir con otras empresas muy grandes como lo es Petrobras, por ejemplo. Ejemplo de sus innovaciones son los 10 millones de USD que invirtieron en un startup extranjero que creó tecnología para poder extraer agua del aire. Ambos artículos los podemos ver en ” Copec se ubica entre las tres empresas mas innovadoras de Latinoamérica” Link: <a href="https://www.empresascopec.cl/noticia/copec-se-ubica-entre-las-tres-empresas-mas-innovadoras-de-latinoamerica/" class="uri">https://www.empresascopec.cl/noticia/copec-se-ubica-entre-las-tres-empresas-mas-innovadoras-de-latinoamerica/</a> y “Copec invierte US $10 millones en startup estadunidense que creo tecnología para extraer agua del aire” Link: <a href="https://www.df.cl/df-lab/innovacion-y-startups/copec-invierte-u-10-millones-en-startup-estadounidense-que-creo" class="uri">https://www.df.cl/df-lab/innovacion-y-startups/copec-invierte-u-10-millones-en-startup-estadounidense-que-creo</a></p>
<p>Por estos motivos es de sumo interés analizar a Empresas Copec S.A. en el presente trabajo</p>
</section>
<section id="contexto" class="level3">
<h3 class="anchored" data-anchor-id="contexto">Contexto</h3>
<p>Un activo que influye respecto de las acciones de Empresas Copec S.A. es el precio del barril de petróleo brent, el cual es el petróleo crudo que compra ENAP y se lo vende a Empresas Copec S.A debido a que ENAP es el único ente que tiene permitido vender el petróleo a nivel nacional, el cual debe ser al mismo precio a todas las empresas en Chile.</p>
<pre><code>                      </code></pre>
<p>Grafico 1: Evolucion precio del petroleo</p>
<p><img src="photos/fotos/precio%20barril.png" class="img-fluid"></p>
<pre><code></code></pre>
<p>El precio del barril de petróleo cerró en 93,94 USD el cual es un precio algo alto comparando a inicios del 2023 el cual estaba en 84,36 USD. Este depende de muchos factores como oferta, demanda, políticos, economías globales, tratados, etc. Si el precio del barril sube ENAP lo debe comprar más caro y por ende se lo vende mas caro a Empresas Copec S.A el cual incurre en más gastos y por ende es menos rentable.</p>
<p>Otro activo que influye en la acción de empresas Copec S.A. es el tipo de cambio del USD, ya que, Empresas Copec S.A exporta muchos de sus productos especialmente de su industria de celulosa a otros mercados, por lo que al aumentar el tipo de cambio se pierden diversos millones debido al gran volumen que venden el cual es de 3500 clientes en 223 puertos internacionales.</p>
<p>Grafico 2: Evolucion cambio USD/CLP</p>
<p><img src="photos/fotos/dolas%20clp.png" class="img-fluid" width="762"></p>
<p>Por ultimo y no menos importantes el es precio del gas natural, el cual esta en 2.907 USD/MMBtu. Empresas Copec S.A a través de su filial Abastible provee de Gas a los hogares de Chile para calefacción, cocinar o el calefont. Este activo en este momento ha ido bajando progresivamente debido a una gran alza que tuvo meses atrás lo que es bueno para Empresas Copec S.A. ya que, ya no deberán paga tanto para tener stock de gas y podrán ir bajando sus precios progresivamente.</p>
<p>Grafico 3: Evolucion precio del gas natural</p>
<p><img src="photos/fotos/gas%20natural.png" class="img-fluid"></p>
</section>
<section id="análisis-de-largo-plazo" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-largo-plazo">Análisis de Largo Plazo</h3>
<section id="caracterización-deuda" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-deuda">Caracterización deuda</h4>
<p>Empresas Copec S.A cuenta con una estructura de capital como lo señala la siguiente tabla1</p>
<p>Tabla 1: Estructura capital Empresas Copec S.A</p>
<p><img src="photos/fotos/estructura%20financiera%20copec.png" class="img-fluid" width="647"></p>
<p>Destaca la cantidad de bonos que tienen los cuales son alrededor de un 30% de la estructura de capital, lo que es alto sin embargo al ser bonos a muy largo plazo no genera tanta incertidumbre. Esto lo podemos ver en su reporte de estado de resultados donde dice “…Existen a su vez préstamos de largo plazo a tasa fija con Empresas Copec, uno por MUF 2.470, otro por MUF 5.344 y el último por MM$ 67.840; el primero expira en octubre de 2024, el segundo en noviembre del año 2030 y el tercero el 15 de septiembre de 2023…”</p>
<p>Además, cuenta solo con acciones comunes con un total de 1.299.853.848 como lo dice la siguiente tabla 2</p>
<p>Tabla 2: Acciones Empresas Copec S.A</p>
<p><img src="photos/fotos/tabla%20acciones%20copec.png" class="img-fluid" width="716"></p>
<p>Donde cada acción tiene un precio de 6.308 CLP. Al contar solo con este tipo de acciones debe pagar dividendos a todos sus accionistas sin tener que pagar antes a los accionistas preferentes, debido a que no tienen acciones preferentes que los obliguen a pagar dividendos primero a estos inversores.</p>
</section>
<section id="caracterización-de-emisiones-históricas-aplicación-cap.-20" class="level4">
<h4 class="anchored" data-anchor-id="caracterización-de-emisiones-históricas-aplicación-cap.-20">Caracterización de emisiones históricas (Aplicación cap. 20)</h4>
<p>Empresas Copec S.A. se abrió en bolsa en después de meses haciendo conferencias previas a la suscripción donde se empezaba a analizar cuanto necesitaba recaudar junto con que tipo de acción se iba a lanzar a la bolsa. Luego de tener esto claro Empresas Copec S.A presentó su declaración de registro la cual fue aceptada ya que esta tenia toda la información financiera y administrativa necesaria. Luego de ser aprobado la empresa se abrió a bolsa el 19/04/1987 donde fue necesario fijar un precio inicial, el cual no se logró encontrar, sin embargo, el precio más antiguo que se logró encontrar fue de 1993 en septiembre el cual fue de 718 CLP. Tras esta primera apertura Empresas Copec S.A sacó nuevas acciones al año siguiente, todas sus emisiones han sido de acciones ordinarias</p>
<p>Imagen 1: Logo Copec 1987</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="photos/fotos/logo%20copec.png" class="img-fluid figure-img" style="width:6.7cm"></p>
</figure>
</div>
</section>
<section id="relación-con-activos-derivados" class="level4">
<h4 class="anchored" data-anchor-id="relación-con-activos-derivados">Relación con activos derivados</h4>
<p>Respecto a los derivados Empresas Copec S.A. si los tienes los cuales son los siguientes descritos en la tabla 3</p>
<p>Tabla 3: Derivados</p>
<p><img src="photos/fotos/derivados.png" class="img-fluid" width="734"></p>
<p>Donde se puede observar que cuentan con 12 mill millones de US en forward y 127 mil millones de US de swaps. Estos se ocupan para disminuir la incertidumbre del mercado. Para el caso de los Swaps, estos son instrumentos financieros que diminuyen el riesgo al tipo de cambio el cual surge de tener deuda en otra moneda que no sea la chilena.</p>
</section>
</section>
<section id="reporte-grupal" class="level3">
<h3 class="anchored" data-anchor-id="reporte-grupal">Reporte grupal</h3>
<p>Luego de analizar las industrias de energia, banca e inmobilaria y sus respectivas acciones especificas las cuales son Empresas Copec S.A, Banco Santander - Chile y Cencosud se llegó a la conclusion que las ponderaciones deben ser 40% Empresas Copes S.A, 30% Banco Santander - Chile y 30% Cencosud. Esto debido principalemente a las nuevas tecnologias que hay en el sector energetico las cuales avanzan cada vez más rapido, a esto se le puede agregar que Chile es un posible potencial del hidrogeno verde gracias a sus grandes vientos en el sur y su gran costa que le da el recurso del agua el cual es necesario para dicho proceso. Además se espera que Chile exporte Hidrogeno verde de aca a 20 años lo que le da una gran oportunidad a Empresas Copec a meterse en este nuevo modelo de energia, y tal como se sabe, esa empresa vela por el medio ambiente y energias sutentables.</p>
<p>Cencosud es una empresa muy prestigiosa que atrae a muchos clientes. Ademas, esta en muchos negocios distintos por lo que da una amplia cartera para que inversionistas puedan comprar las acciones diversificando su riesgo. Por otro lado, tiene una alta presencia en Latino America, lo que proporciona una entrada a un mercado amplio y diverso. Además tiene una gestion financiera prudente, que le da la posibilidad de un correcto manejo de deudas, liquidez y buena rentabilidad. Es por esto que tiene una alta probabilidad de tener una rentibilidad positiva, la cual es bien respaldada por el exito de la empresa y el correcto manejo de decisiones estrategicas y una adaptacion constante, lo que respalda el 30% de peso asignado a esta accion</p>
<p>Banco Santander es una inversión atractiva y segura debido a su alta capacidad de solvencia y por sus retornos promedio históricos positivos durante los periodos de crisis. “Santander gestiona el riesgo de liquidez utilizando una cartera de activos líquidos para garantizar que el Banco mantenga siempre suficiente liquidez para cubrir las fluctuaciones a corto plazo y el financiamiento a largo plazo, cumpliendo con los requisitos normativos internos de liquidez”. (Fuente: Información Financiera Santander Chile, 2023) Además, sus inversiones están altamente diversificadas para mitigar riesgos y tener una cartera estable durante el tiempo. A continuación se muestran las principales inversiones del banco en el siguiente gráfico:</p>
<p>Grafico 4: Inversiones Banco Santander</p>
<p><img src="photos/fotos/WhatsApp%20Image%202023-09-28%20at%2013.24.08.jpeg" class="img-fluid"></p>
<p>En conclusion las 3 acciones van a rentar a largo plazo pero creemos que la industria de energia especificamente Empresas Copec, es la accion que mas va a generar retornos. Además al otorgar 30% a las otras dos acciones se estaria diverificando el riesgo en caso de enfretar adversidades en Empresas Copes S.A.</p>
<p>HITO 2</p>
</section>
<section id="aplicación-black-scholes" class="level3">
<h3 class="anchored" data-anchor-id="aplicación-black-scholes">Aplicación Black-Scholes</h3>
<p>Se valoriza correctamente una opción de compra del activo principal definido en el Hito 1, utilizando el modelo de Black-Scholes continuo apoyándose de un código replicable que compute el modelo. Se apoya de literatura para complementar su valorización.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
[*********************100%%**********************]  1 of 1 completed</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
[*********************100%%**********************]  1 of 1 completed</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>5.20812513161944</code></pre>
</div>
</div>
</section>
<section id="modelo-adicional-de-valorizacion" class="level3">
<h3 class="anchored" data-anchor-id="modelo-adicional-de-valorizacion">Modelo Adicional de valorizacion</h3>
<p>Se explica junto con descripcion matemática (fórmulas) correcta un modelo alternativo para valorizar la accion haciendo revisión de literatura cientifica con tal de hacer una referencia a un artículo del modelo.</p>
</section>
<section id="aplicacion-modelo-adicional" class="level3">
<h3 class="anchored" data-anchor-id="aplicacion-modelo-adicional">Aplicacion modelo adicional</h3>
<p>Se aplica el modelo alternativo apoyandose de un código replicable que computa el modelo.</p>
</section>
<section id="análisis-de-contraste-de-ambos-modelos" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-contraste-de-ambos-modelos">Análisis de contraste de ambos modelos</h3>
<p>Se realiza una comparación de los resultados de ambos modelos de valorización explicando sus similitudes y diferencias.</p>
</section>
<section id="reporte-grupal-caso-administración" class="level3">
<h3 class="anchored" data-anchor-id="reporte-grupal-caso-administración">Reporte Grupal: Caso Administración</h3>
<p>Se eligen uno de los siguientes casos con tal de replicar y responder sus preguntas de acuerdo al activo principal elegido:</p>
<ul>
<li><p>Caso Administración de Capital de Trabajo de Keafer Manufacturing de la página 822 del ROSS.</p></li>
<li><p>Caso Administración de Efectivo de Richmond Corporation de la página 845 del ROSS.</p></li>
<li><p>Caso Administración de Efectivo de Braam Industries de la página 874 del ROSS.</p></li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>